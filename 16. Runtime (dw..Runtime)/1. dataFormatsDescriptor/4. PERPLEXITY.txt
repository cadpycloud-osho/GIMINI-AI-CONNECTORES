dataFormatsDescriptor:




input:

import org.springframework.http.MediaType;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;
import java.util.Map;

@RestController
public class RuntimeController {

    @GetMapping(value = "/data-formats-descriptor", produces = MediaType.APPLICATION_JSON_VALUE)
    public List<Map<String, Object>> dataFormatsDescriptor() {
        return List.of(
            jsonDescriptor(),
            xmlDescriptor()
        );
    }

    private Map<String, Object> jsonDescriptor() {
        return Map.of(
            "id", "json",
            "binary", false,
            "defaultEncoding", "UTF-8",
            "extensions", List.of(".json"),
            "defaultMimeType", "application/json",
            "acceptedMimeTypes", List.of("application/json"),
            "readerProperties", List.of(
                Map.of(
                    "name", "streaming",
                    "optional", true,
                    "defaultValue", false,
                    "description", "Used for streaming input (use only if entries are accessed sequentially).",
                    "possibleValues", List.of(true, false)
                )
            ),
            "writerProperties", List.of(
                Map.of(
                    "name", "writeAttributes",
                    "optional", true,
                    "defaultValue", false,
                    "description", "Indicates that if a key has attributes, they are going to be added as children key-value pairs of the key that contains them. The attribute new key name will start with @.",
                    "possibleValues", List.of(true, false)
                ),
                Map.of(
                    "name", "skipNullOn",
                    "optional", true,
                    "defaultValue", "None",
                    "description", "Indicates where is should skips null values if any or not. By default it doesn't skip.",
                    "possibleValues", List.of("arrays", "objects", "everywhere")
                )
            )
        );
    }

    private Map<String, Object> xmlDescriptor() {
        return Map.of(
            "id", "xml",
            "binary", false,
            "extensions", List.of(".xml"),
            "defaultMimeType", "application/xml",
            "acceptedMimeTypes", List.of("application/xml"),
            "readerProperties", List.of(
                Map.of(
                    "name", "supportDtd",
                    "optional", true,
                    "defaultValue", true,
                    "description", "Whether DTD handling is enabled or disabled; disabling means both internal and external subsets will just be skipped unprocessed.",
                    "possibleValues", List.of(true, false)
                ),
                Map.of(
                    "name", "streaming",
                    "optional", true,
                    "defaultValue", false,
                    "description", "Used for streaming input (use only if entries are accessed sequentially).",
                    "possibleValues", List.of(true, false)
                ),
                Map.of(
                    "name", "maxEntityCount",
                    "optional", true,
                    "defaultValue", 1,
                    "description", "The maximum number of entity expansions. The limit is in place to avoid Billion Laughs attacks.",
                    "possibleValues", List.of()
                )
            ),
            "writerProperties", List.of(
                Map.of(
                    "name", "writeDeclaration",
                    "optional", true,
                    "defaultValue", true,
                    "description", "Indicates whether to write the XML header declaration or not.",
                    "possibleValues", List.of(true, false)
                ),
                Map.of(
                    "name", "indent",
                    "optional", true,
                    "defaultValue", true,
                    "description", "Indicates whether to indent the code for better readability or to compress it into a single line.",
                    "possibleValues", List.of(true, false)
                )
            )
        );
    }
}


output:

[
  {
    "id": "json",
    "binary": false,
    "defaultEncoding": "UTF-8",
    "extensions": [".json"],
    "defaultMimeType": "application/json",
    "acceptedMimeTypes": ["application/json"],
    "readerProperties": [...],
    "writerProperties": [...]
  },
  {
    "id": "xml",
    "binary": false,
    "extensions": [".xml"],
    "defaultMimeType": "application/xml",
    "acceptedMimeTypes": ["application/xml"],
    "readerProperties": [...],
    "writerProperties": [...]
  }
]


