eval:


input:


import java.nio.charset.StandardCharsets;
import java.util.*;

public class Main {

    /* ---------- Helpers ---------- */

    static Map<String, Object> success(Object value) {
        return Map.of(
                "success", true,
                "value", value,
                "logs", List.of()
        );
    }

    static Map<String, Object> failure(String message) {
        return Map.of(
                "success", false,
                "message", message,
                "logs", List.of()
        );
    }

    static byte[] binary(String json) {
        return json.getBytes(StandardCharsets.UTF_8);
    }

    /* ---------- Simulated Runtime ---------- */

    static Map<String, Object> executeOk() {
        return Map.of(
                "success", true,
                "value", "{\n  a: 1\n}",
                "mimeType", "application/dw",
                "encoding", "UTF-8",
                "logs", List.of()
        );
    }

    static Map<String, Object> logsExample() {
        return Map.of(
                "m", List.of("1"),
                "l", List.of("INFO")
        );
    }

    static Map<String, Object> grantDenied() {
        return Map.of(
                "success", false,
                "message",
                "The given required permissions: `Resource` are not being granted for this execution.\nTrace:\n  at readUrl",
                "location", Map.of("content", "Unknown location"),
                "stack", List.of("readUrl", "main"),
                "logs", List.of()
        );
    }

    static Map<String, Object> libraryCall() {
        return success(3);
    }

    static boolean timeout() {
        return true;
    }

    static Map<String, Object> execFail() {
        return failure("My Bad");
    }

    static Map<String, Object> parseFail() {
        return Map.of(
                "success", false,
                "message", "Invalid input \"1 + \"",
                "location", Map.of("line", 1, "column", 2),
                "logs", List.of()
        );
    }

    static Map<String, Object> writerFail() {
        return success(2);
    }

    static Map<String, Object> defaultOutput() {
        return success(
                Map.of(
                        "name", "Mariano",
                        "lastName", "achaval"
                )
        );
    }

    static boolean onExceptionFail() {
        try {
            throw new RuntimeException("Failing Test");
        } catch (Exception e) {
            return false;
        }
    }

    static Map<String, Object> customLogger() {
        // custom logger simulation
        System.out.println("INFO 1234");
        return success(1234);
    }

    /* ---------- MAIN ---------- */

    public static void main(String[] args) {

        Map<String, Object> output = new LinkedHashMap<>();

        output.put("execute_ok", executeOk());
        output.put("logs", logsExample());
        output.put("grant", grantDenied());
        output.put("library", libraryCall());
        output.put("timeout", timeout());
        output.put("execFail", execFail());
        output.put("parseFail", parseFail());
        output.put("writerFail", writerFail());
        output.put("defaultOutput", defaultOutput());
        output.put("onExceptionFail", onExceptionFail());
        output.put("customLogger", customLogger());

        System.out.println(output);
    }
}



output:

{
  "execute_ok": {
    "success": true,
    "value": "{\n  a: 1\n}",
    "mimeType": "application/dw",
    "encoding": "UTF-8",
    "logs": []
  },
  "logs": {
    "m": ["1"],
    "l": ["INFO"]
  },
  "grant": {
    "success": false,
    "message": "The given required permissions: `Resource` are not being granted for this execution.",
    "logs": []
  },
  "library": {
    "success": true,
    "value": 3,
    "logs": []
  },
  "timeout": true,
  "execFail": {
    "success": false,
    "message": "My Bad",
    "logs": []
  },
  "parseFail": {
    "success": false,
    "message": "Invalid input \"1 + \"",
    "logs": []
  },
  "writerFail": {
    "success": true,
    "value": 2,
    "logs": []
  },
  "defaultOutput": {
    "success": true,
    "value": {
      "name": "Mariano",
      "lastName": "achaval"
    },
    "logs": []
  },
  "onExceptionFail": false,
  "customLogger": {
    "success": true,
    "value": 1234,
    "logs": []
  }
}





