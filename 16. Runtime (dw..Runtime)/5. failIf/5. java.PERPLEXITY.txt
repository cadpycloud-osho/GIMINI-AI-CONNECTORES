vfailIf:

examples 1:

input:

import java.util.Map;

public class Main {
    public static void main(String[] args) {
        Map<String, String> result = Map.of(); // Empty object matching var result = {}
        
        try {
            // Matches: { "result" : "SUCCESS" failIf (isEmpty(result)) }
            Map<String, String> response = new SuccessResponse("SUCCESS")
                .failIf(result.isEmpty(), "Failed")
                .toMap();
            System.out.println(response);
        } catch (FailIfException e) {
            System.out.println("ERROR: " + e.getMessage());
        }
    }
}

class SuccessResponse {
    private final String value;
    
    public SuccessResponse(String value) {
        this.value = value;
    }
    
    public SuccessResponse failIf(boolean condition, String message) {
        if (condition) {
            throw new FailIfException(message);
        }
        return this;
    }
    
    public Map<String, String> toMap() {
        return Map.of("result", value);
    }
}

class FailIfException extends RuntimeException {
    public FailIfException(String message) {
        super(message);
    }
}



output:


Pure Java console:

text
ERROR Failed
Exact Syntax Match
Both replicate DataWeave chaining exactly:

text
{ "result" : "SUCCESS" failIf (isEmpty(result)) }
Java equivalent:

java
new SuccessResponse("SUCCESS").failIf(result.isEmpty(), "Failed")

----------------------------------------------------------------



examples 2:

input:

import java.util.Map;

public class Main {

    public static void main(String[] args) {
        Map<String, Object> result = Map.of("a", "test");  // var result = {"a":"test"}

        // Equivalent to: result failIf isEmpty($)
        Map<String, Object> safeResult = failIfEmpty(result, "Failed");

        // Build the final structure: { "result": result }
        Map<String, Object> output = Map.of("result", safeResult);

        System.out.println(output);
    }

    private static <T> T failIfEmpty(T value, String message) {
        if (value == null
            || (value instanceof java.util.Map && ((java.util.Map<?, ?>) value).isEmpty())
            || (value instanceof java.util.Collection && ((java.util.Collection<?>) value).isEmpty())) {
            throw new RuntimeException(message);
        }
        return value;
    }
}


output:

Console output (using standard Map.toString()):

text
{result={a=test}}
If you serialize output to JSON (e.g., with Jackson), it becomes:

json
{
  "result": {
    "a": "test"
  }
}
