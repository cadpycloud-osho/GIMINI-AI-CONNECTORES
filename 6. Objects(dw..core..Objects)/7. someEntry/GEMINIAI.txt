someEntry:



input:

package com.example.dataweaveconverter;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.stereotype.Service;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.Collections;
import java.util.Map;
import java.util.function.Predicate;

@SpringBootApplication
public class DataweaveSomeEntryApplication {

    public static void main(String[] args) {
        SpringApplication.run(DataweaveSomeEntryApplication.class, args);
    }

    // =========================================================================
    // 1. DTO (Data Transfer Object)
    // =========================================================================
    public record DataWeaveOutput(
        boolean a,
        boolean b,
        boolean c,
        boolean d,
        boolean e,
        boolean f
    ) {}

    // =========================================================================
    // 2. REST CONTROLLER
    // =========================================================================
    @RestController
    @RequestMapping("/convert")
    public static class DataWeaveController {

        private final DataWeaveService dataWeaveService;

        @Autowired
        public DataWeaveController(DataWeaveService dataWeaveService) {
            this.dataWeaveService = dataWeaveService;
        }

        @GetMapping("/someEntry")
        public DataWeaveOutput runDataWeaveLogic() {
            // Source data for the someEntry operation
            Map<String, Object> mapB = Map.of("a", "", "b", "123");
            Map<String, Object> mapC_D = Map.of("a", "", "b", 123);
            Map<String, Object> mapE = Map.of("a", "");

            return new DataWeaveOutput(
                // a: {} someEntry (value is String) -> false
                dataWeaveService.someEntry(Collections.emptyMap(), entry -> entry.getValue() instanceof String),

                // b: {a: "", b: "123"} someEntry (value is String) -> true
                dataWeaveService.someEntry(mapB, entry -> entry.getValue() instanceof String),

                // c: {a: "", b: 123} someEntry (value is String) -> true 
                dataWeaveService.someEntry(mapC_D, entry -> entry.getValue() instanceof String),

                // d: {a: "", b: 123} someEntry (key == "a") -> true 
                dataWeaveService.someEntry(mapC_D, entry -> entry.getKey().equals("a")),

                // e: {a: ""} someEntry (key == "b") -> false
                dataWeaveService.someEntry(mapE, entry -> entry.getKey().equals("b")),

                // f: null someEntry (...) -> false
                dataWeaveService.someEntry(null, entry -> entry.getKey().equals("a"))
            );
        }

output:

{
  "a": false,
  "b": true,
  "c": true,
  "d": true,
  "e": false,
  "f": false
}
