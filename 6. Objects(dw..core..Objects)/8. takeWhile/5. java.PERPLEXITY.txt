takeWhile:



input:


import java.util.*;

public class Main {
    public static void main(String[] args) {
        // DataWeave equivalent: var obj = { "a": 1, "b": 2, "c": 5, "d": 1 }
        Map<String, Object> obj = new LinkedHashMap<>();
        obj.put("a", 1);
        obj.put("b", 2);
        obj.put("c", 5);
        obj.put("d", 1);
        
        // DataWeave equivalent: obj takeWhile ((value, key) -> value < 3)
        Map<String, Object> result = takeWhile(obj, (value, key) -> (Integer) value < 3);
        
        // Output as JSON structure matching DataWeave
        System.out.println(mapToJson(result));
    }
    
    // DataWeave "obj takeWhile (value, key) -> predicate" equivalent
    public static Map<String, Object> takeWhile(Map<String, Object> obj, EntryPredicate predicate) {
        Map<String, Object> result = new LinkedHashMap<>();
        
        for (Map.Entry<String, Object> entry : obj.entrySet()) {
            if (!predicate.test(entry.getValue(), entry.getKey())) {
                break;  // Stop at first failure
            }
            result.put(entry.getKey(), entry.getValue());
        }
        return result;
    }
    
    // Functional interface for the predicate
    @FunctionalInterface
    interface EntryPredicate {
        boolean test(Object value, String key);
    }
    
    // Utility to format map as JSON
    private static String mapToJson(Map<String, Object> map) {
        StringBuilder sb = new StringBuilder("{");
        map.forEach((k, v) -> {
            sb.append("\n  \"").append(k).append("\": ").append(v).append(",");
        });
        if (!map.isEmpty()) {
            sb.setLength(sb.length() - 1); // Remove last comma
        }
        sb.append("\n}");
        return sb.toString();
    }
}


output:

{
  "a": 1,
  "b": 2
}



