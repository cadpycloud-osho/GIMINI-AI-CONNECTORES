divideBy:



input:


package com.example.demo.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
import java.util.*;

@RestController
public class DivideByController {

    @GetMapping("/divideBy")
    public Map<String, Object> divideByExample() {

        // Ordered map to simulate DW behavior
        LinkedHashMap<String, Object> input = new LinkedHashMap<>();
        input.put("a", 1);
        input.put("b", true);
        input.put("a", 2);
        input.put("b", false);
        input.put("c", 3);

        List<Map<String, Object>> result = new ArrayList<>();
        Map<String, Object> tempMap = new LinkedHashMap<>();
        int counter = 0;

        for (Map.Entry<String, Object> entry : input.entrySet()) {
            tempMap.put(entry.getKey(), entry.getValue());
            counter++;

            if (counter == 2) {
                result.add(tempMap);
                tempMap = new LinkedHashMap<>();
                counter = 0;
            }
        }

        if (!tempMap.isEmpty()) {
            result.add(tempMap);
        }

        return Map.of("divideBy", result);
    }
}


ouput:


{
  "divideBy": [
    {
      "a": 1,
      "b": true
    },
    {
      "a": 2,
      "b": false
    },
    {
      "c": 3
    }
  ]
}
