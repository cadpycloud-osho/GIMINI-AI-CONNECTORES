nodeExists:


input:

@RestController
public class NodeExistsController {
    
    private static final ObjectMapper mapper = new ObjectMapper();
    
    @PostMapping("/check-nodes")
    public Map<String, Boolean> checkNodes(@RequestBody Map<String, Object> input) {
        Map<String, Object> myObject = (Map<String, Object>) input.get("myObject");
        Map<String, Boolean> result = new HashMap<>();
        
        String[] names = {"mariano", "julian", "tom", "leandro", "peter", "wrongField", "teo"};
        for (String name : names) {
            if ("wrongField".equals(name)) {
                result.put(name, nodeExists(myObject, "wrongField", false));
            } else {
                result.put(name, nodeExists(myObject, "name", true, name));
            }
        }
        return result;
    }
    
    private boolean nodeExists(Object obj, String selector, boolean checkValue, String... targetValue) {
        return search(obj, new ArrayList<>(), selector, checkValue, targetValue);
    }
    
    private boolean search(Object value, List<Map<String, Object>> path, String targetSelector, 
                          boolean checkValue, String... targetValue) {
        if (value instanceof Map) {
            Map<String, Object> map = (Map<String, Object>) value;
            for (Map.Entry<String, Object> entry : map.entrySet()) {
                Map<String, Object> pathElement = new HashMap<>();
                pathElement.put("kind", "Object");
                pathElement.put("selector", entry.getKey());
                path.add(pathElement);
                
                if (search(entry.getValue(), path, targetSelector, checkValue, targetValue)) {
                    path.remove(path.size() - 1);
                    return true;
                }
                path.remove(path.size() - 1);
            }
        } else if (value instanceof List) {
            List<?> list = (List<?>) value;
            for (int i = 0; i < list.size(); i++) {
                Map<String, Object> pathElement = new HashMap<>();
                pathElement.put("kind", "Array");
                pathElement.put("selector", i);
                path.add(pathElement);
                
                if (search(list.get(i), path, targetSelector, checkValue, targetValue)) {
                    path.remove(path.size() - 1);
                    return true;
                }
                path.remove(path.size() - 1);
            }
        } else {
            // Leaf node check
            if (!path.isEmpty()) {
                Map<String, Object> lastPath = path.get(path.size() - 1);
                String selector = (String) lastPath.get("selector");
                if (selector.equals(targetSelector) && 
                    (!checkValue || (targetValue.length > 0 && value.equals(targetValue[0])))) {
                    return true;
                }
            }
        }
        return false;
    }
}


output:


{
  "mariano": true,
  "julian": true,
  "tom": true,
  "leandro": true,
  "peter": true,
  "wrongField": false,
  "teo": false
}



