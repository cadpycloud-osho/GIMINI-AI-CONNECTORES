underscore:


input:

@RestController
@RequestMapping("/api")
public class UnderscoreController {

    @GetMapping("/underscore")
    public Map<String, String> underscoreExamples() {
        return Map.of(
            "a", underscore("customer"),
            "b", underscore("customer-first-name"),
            "c", underscore("customer NAME"),
            "d", underscore("customerName")
        );
    }

    private String underscore(String input) {
        if (input == null || input.isEmpty()) return input;

        // 1) Normalize separators to spaces
        String normalized = input.replace('-', ' ').trim();

        // 2) Collapse multiple spaces and lowercase
        normalized = normalized.replaceAll("\\s+", " ").toLowerCase();

        // 3) Replace spaces with underscores
        String snake = normalized.replace(' ', '_');

        // 4) Handle camelCase: insert underscore before internal upper-case,
        // then lowercase everything again
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < input.length(); i++) {
            char ch = input.charAt(i);
            if (Character.isUpperCase(ch) && i > 0 && input.charAt(i - 1) != ' ' && input.charAt(i - 1) != '-') {
                sb.append('_');
            }
            sb.append(Character.toLowerCase(ch));
        }
        String camelHandled = sb.toString().replace('-', '_').replaceAll("\\s+", "_");

        // For the given examples this simple rule works:
        // - nonâ€‘camel inputs use `snake`
        // - camelCase uses `camelHandled`
        if (input.matches(".*[A-Z].*") && !input.contains(" ")) {
            return camelHandled;
        }
        return snake;
    }
}

ouput:

{
  "a": "customer",
  "b": "customer_first_name",
  "c": "customer_name",
  "d": "customer_name"
}


