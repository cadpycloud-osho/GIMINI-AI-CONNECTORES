lines:


input:

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
import java.util.Collections;
import java.util.List;
import java.util.Map;
import java.util.Arrays;

@RestController
public class LinesSplitController {

    /**
     * Custom method to emulate DataWeave's lines(text) function.
     * Splits a string by line breaks (\r, \n, \r\n) and keeps empty lines.
     * We use lookarounds to split but keep the empty tokens, though a direct Java split 
     * on "\\r?\\n|\\r" with the limit parameter set correctly is often required for robust behavior.
     * The simplest way to reliably include blank lines in Java is often splitting on a single 
     * regex and using the appropriate limit.
     */
    private List<String> splitIntoLines(String input) {
        if (input == null) {
            return Collections.emptyList();
        }
        
        // Java's split behavior: 
        // 1. We use "\\R" (Unicode line break regex) or equivalent: "\\r?\\n|\\r"
        // 2. Using a negative limit (e.g., -1) ensures that trailing empty strings 
        //    (which can occur due to line breaks at the end or consecutive line breaks) are included.
        String[] linesArray = input.split("\\r?\\n|\\r", -1);
        
        return Arrays.asList(linesArray);
    }

    /**
     * Endpoint equivalent to the DataWeave expression: lines("hello world\n\nhere   data-weave")
     */
    @GetMapping("/split-lines")
    public Map<String, List<String>> getLinesSplit() {
        // The input string with two line breaks, resulting in a blank line.
        // Note: Java handles the non-breaking space (U+00A0) correctly.
        String inputString = "hello world\n\nhere\u00A0 \u00A0data-weave"; 
        
        List<String> result = splitIntoLines(inputString);
        
        // Return the result in the desired JSON format
        return Collections.singletonMap("lines", result);
    }
}


OUTPUT:

{
  "lines": [
    "hello world",
    "",
    "here   data-weave"
  ]
}
