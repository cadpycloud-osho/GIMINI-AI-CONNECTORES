toLocalTime:


input:

import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import java.time.LocalTime;
import java.time.format.DateTimeFormatter;
import java.time.format.DateTimeParseException;
import java.util.LinkedHashMap;
import java.util.Map;

public class LocalTimeConversionRoute extends RouteBuilder {
    
    @Override
    public void configure() throws Exception {
        from("direct:start")
            .process(new Processor() {
                @Override
                public void process(Exchange exchange) throws Exception {
                    Map<String, Object> result = new LinkedHashMap<>();
                    String inputTime = "23:57:59";
                    
                    // Equivalent to DataWeave 'a' - try multiple formats
                    DateTimeFormatter[] formats = {
                        DateTimeFormatter.ofPattern("HH:mm:ss.SSS"),
                        DateTimeFormatter.ofPattern("HH:mm:ss")
                    };
                    
                    LocalTime parsedTime = null;
                    for (DateTimeFormatter formatter : formats) {
                        try {
                            parsedTime = LocalTime.parse(inputTime, formatter);
                            break;
                        } catch (DateTimeParseException e) {
                            // Continue to next format
                        }
                    }
                    result.put("a", parsedTime != null ? parsedTime.format(DateTimeFormatter.ISO_LOCAL_TIME) : null);
                    
                    // Equivalent to DataWeave 'b' - try single format and capture error
                    try {
                        LocalTime singleFormatTime = LocalTime.parse(inputTime, 
                            DateTimeFormatter.ofPattern("HH:mm:ss.SSS"));
                        result.put("b", "Success");
                    } catch (DateTimeParseException e) {
                        result.put("b", "Could not find a valid formatter for '" + inputTime + "'");
                    }
                    
                    exchange.getIn().setBody(result);
                }
            });
    }
}



output:

{
  "a": "23:57:59",
  "b": "Could not find a valid formatter for '23:57:59'"
}




