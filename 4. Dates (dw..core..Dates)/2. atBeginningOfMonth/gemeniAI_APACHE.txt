atBeginningOfMonth:

example 1:

input:

import org.apache.camel.builder.RouteBuilder;
import java.time.OffsetDateTime;
import java.time.LocalTime;
import java.time.temporal.TemporalAdjusters;
import java.time.format.DateTimeFormatter;
import java.util.HashMap;
import java.util.Map;

public class BeginningOfMonthRoute extends RouteBuilder {

    @Override
    public void configure() throws Exception {

        from("direct:startBeginningOfMonth")
            .routeId("Beginning-Of-Month-Route")
            .process(exchange -> {
                // 1. The input string (ISO-8601 with offset)
                String inputDT = "2020-10-06T18:23:20.351-03:00";

                // 2. Parse into OffsetDateTime
                OffsetDateTime dateTime = OffsetDateTime.parse(inputDT);

                // 3. Logic: atBeginningOfMonth 
                // We move the day to the 1st and reset time to 00:00:00
                OffsetDateTime beginningOfMonth = dateTime
                    .with(TemporalAdjusters.firstDayOfMonth()) // Sets day to 1
                    .with(LocalTime.MIN);                      // Sets time to 00:00:00

                // 4. Format the output to match DataWeave's specific string output
                // ISO_OFFSET_DATE_TIME handles the -03:00 part automatically
                String result = beginningOfMonth.format(DateTimeFormatter.ISO_OFFSET_DATE_TIME);

                // 5. Structure the Map for JSON output
                Map<String, String> response = new HashMap<>();
                response.put("atBeginningOfMonthDateTime", result);

                exchange.getIn().setBody(response);
            })
            // 6. Logic: output application/json
            .marshal().json()
            .log("Final JSON Output: ${body}");
    }
}



output:


{
  "atBeginningOfMonthDateTime": "2020-10-01T00:00:00-03:00"
}


------------------------------------------------


example 2:

input:

import org.apache.camel.builder.RouteBuilder;
import java.time.LocalDateTime;
import java.time.LocalTime;
import java.time.temporal.TemporalAdjusters;
import java.time.format.DateTimeFormatter;
import java.util.HashMap;
import java.util.Map;

public class BeginningOfLocalMonthRoute extends RouteBuilder {

    @Override
    public void configure() throws Exception {

        from("direct:startLocalMonth")
            .routeId("Beginning-Of-Local-Month-Route")
            .process(exchange -> {
                // 1. Input string without timezone offset
                String inputDT = "2020-10-06T18:23:20.351";

                // 2. Parse into LocalDateTime
                LocalDateTime dateTime = LocalDateTime.parse(inputDT);

                // 3. Logic: atBeginningOfMonth 
                // Adjust to the 1st of the month and then to the start of that day
                LocalDateTime beginningOfLocalMonth = dateTime
                    .with(TemporalAdjusters.firstDayOfMonth())
                    .with(LocalTime.MIN);

                // 4. Format to match DW output (YYYY-MM-DDTHH:mm:ss)
                DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd'T'HH:mm:ss");
                String result = beginningOfLocalMonth.format(formatter);

                // 5. Structure the Map for JSON output
                Map<String, String> response = new HashMap<>();
                response.put("atBeginningOfMonthLocalDateTime", result);

                exchange.getIn().setBody(response);
            })
            // 6. Logic: output application/json
            .marshal().json()
            .log("Final JSON Output: ${body}");
    }
}



output:


{
  "atBeginningOfMonthLocalDateTime": "2020-10-01T00:00:00"
}


------------------------------------------------


example 3:

input:

import org.apache.camel.builder.RouteBuilder;
import java.time.LocalDate;
import java.time.temporal.TemporalAdjusters;
import java.time.format.DateTimeFormatter;
import java.util.HashMap;
import java.util.Map;

public class BeginningOfMonthDateRoute extends RouteBuilder {

    @Override
    public void configure() throws Exception {

        from("direct:startMonthDate")
            .routeId("Beginning-Of-Month-Date-Route")
            .process(exchange -> {
                // 1. Input string as a plain Date (YYYY-MM-DD)
                String inputDateStr = "2020-10-06";

                // 2. Parse into LocalDate
                LocalDate date = LocalDate.parse(inputDateStr);

                // 3. Logic: atBeginningOfMonth 
                // Adjust to the 1st of the month
                LocalDate beginningOfMonth = date.with(TemporalAdjusters.firstDayOfMonth());

                // 4. Format the output back to string (ISO-8601 Date format)
                String result = beginningOfMonth.format(DateTimeFormatter.ISO_LOCAL_DATE);

                // 5. Structure the Map for JSON output
                Map<String, String> response = new HashMap<>();
                response.put("atBeginningOfMonthDate", result);

                exchange.getIn().setBody(response);
            })
            // 6. Logic: output application/json
            .marshal().json()
            .log("Final JSON Output: ${body}");
    }
}



output:

{
  "atBeginningOfMonthDate": "2020-10-01"
}



------------------------------------------------


