toMilliseconds:



input:

@SpringBootApplication
public class DataWeaveTimerToMillisecondsApplication {
    public static void main(String[] args) {
        SpringApplication.run(DataWeaveTimerToMillisecondsApplication.class, args);
    }
}

@RestController
@RequestMapping("/timer")
@RequiredArgsConstructor
class TimerController {
    
    private final TimerService timerService;
    
    @GetMapping("/toMilliseconds")
    public Map<String, Long> toMilliseconds() {
        return timerService.toMilliseconds();
    }
}

@Service
class TimerService {
    
    private static final DateTimeFormatter ISO_FORMAT = 
        DateTimeFormatter.ofPattern("yyyy-MM-dd'T'HH:mm:ss.SSSX");
    
    /**
     * DataWeave Timer.toMilliseconds() equivalent:
     * Converts ISO 8601 datetime to milliseconds since Unix epoch
     */
    public Map<String, Long> toMilliseconds() {
        String isoDateTime = "2018-07-23T22:03:04.829Z";
        return Map.of("toMilliseconds", toMilliseconds(isoDateTime));
    }
    
    public long toMilliseconds(String isoDateTime) {
        LocalDateTime dateTime = LocalDateTime.parse(isoDateTime, ISO_FORMAT);
        ZonedDateTime zonedDateTime = dateTime.atZone(ZoneOffset.UTC);
        return zonedDateTime.toInstant().toEpochMilli();
    }
}

<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
</dependencies>

output:
{
  "toMilliseconds": 1532383384829
}



