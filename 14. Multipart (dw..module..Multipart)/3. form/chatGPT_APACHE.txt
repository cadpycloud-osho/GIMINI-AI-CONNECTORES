form:

example 1:


input:

import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.Exchange;
import org.apache.camel.Message;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.HashMap;
import java.util.Map;

public class MultipartFileAndFieldsRoute extends RouteBuilder {

    @Override
    public void configure() throws Exception {

        from("direct:start")
            .process(exchange -> {

                // Read XML file
                String ordersFilePath = "src/main/resources/orders.xml";
                String xmlContent = Files.readString(Paths.get(ordersFilePath));

                // Prepare multipart body
                Map<String, Object> multipartBody = new HashMap<>();

                // 1️⃣ File part
                Map<String, Object> filePart = new HashMap<>();
                filePart.put("value", xmlContent);
                filePart.put("mime", "application/xml");
                filePart.put("fileName", "myorders.xml");
                multipartBody.put("file", filePart);

                // 2️⃣ Plain text field
                Map<String, Object> textField = new HashMap<>();
                textField.put("value", "Annie Point");
                textField.put("mime", "text/plain");
                multipartBody.put("userName", textField);

                // 3️⃣ JSON field with filename
                String jsonValue = "{\n  \"user\": \"Annie Point\"\n}";
                Map<String, Object> jsonField = new HashMap<>();
                jsonField.put("value", jsonValue);
                jsonField.put("mime", "application/json");
                jsonField.put("fileName", "userInfo.json");
                multipartBody.put("myJson", jsonField);

                // Set body and headers
                Message message = exchange.getMessage();
                message.setBody(multipartBody);
                message.setHeader(Exchange.CONTENT_TYPE, "multipart/form-data");
            });
    }
}

output:


------=_Part_123456789
Content-Type: application/xml
Content-Disposition: form-data; name="file"; filename="myorders.xml"
<?xml version='1.0' encoding='UTF-8'?>
<orders>
  <order>
    <item>
      <id>1001</id>
      <qty>1</qty>
      <price>$100</price>
    </item>
    <item>
      <id>2001</id>
      <qty>2</qty>
      <price>$50</price>
    </item>
  </order>
</orders>
------=_Part_123456789
Content-Type: text/plain
Content-Disposition: form-data; name="userName"
Annie Point
------=_Part_123456789
Content-Type: application/json
Content-Disposition: form-data; name="myJson"; filename="userInfo.json"
{
  "user": "Annie Point"
}
------=_Part_123456789--



-------------------------------------------------

example 2:


input:
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.Exchange;
import org.apache.camel.Message;
import java.util.HashMap;
import java.util.Map;

public class MultipartTextFieldsRoute extends RouteBuilder {

    @Override
    public void configure() {

        from("direct:start")
            .process(exchange -> {

                // Prepare multipart body
                Map<String, Object> multipartBody = new HashMap<>();

                // First part
                Map<String, Object> part1 = new HashMap<>();
                part1.put("value", "content for my first part");
                multipartBody.put("myFirstPart", part1);

                // Second part
                Map<String, Object> part2 = new HashMap<>();
                part2.put("value", "content for my second part");
                multipartBody.put("mySecondPart", part2);

                // Set body and headers
                Message message = exchange.getMessage();
                message.setBody(multipartBody);
                message.setHeader(Exchange.CONTENT_TYPE, "multipart/form-data");
            });
    }
}


output:

------=_Part_123456789
Content-Disposition: form-data; name="myFirstPart"

content for my first part
------=_Part_123456789
Content-Disposition: form-data; name="mySecondPart"

content for my second part
------=_Part_123456789--

















