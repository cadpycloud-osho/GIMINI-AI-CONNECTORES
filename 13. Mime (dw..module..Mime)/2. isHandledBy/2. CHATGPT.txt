isHandledBy:


input:

package com.example.demo.model;

import java.util.Map;

public class MimeType {
    public String type;
    public String subtype;
    public Map<String, String> parameters;

    public MimeType(String type, String subtype, Map<String, String> parameters) {
        this.type = type;
        this.subtype = subtype;
        this.parameters = parameters;
    }
}

package com.example.demo.util;

import com.example.demo.model.MimeType;
import java.util.Map;

public class MimeUtils {

    public static boolean isHandledBy(MimeType a, MimeType b) {

        // Type check
        if (!b.type.equals("*") && !b.type.equalsIgnoreCase(a.type))
            return false;

        // Subtype check
        if (!b.subtype.equals("*")) {
            if (b.subtype.contains("*+")) {
                String suffix = b.subtype.substring(2);
                if (!a.subtype.endsWith(suffix))
                    return false;
            } else if (!b.subtype.equalsIgnoreCase(a.subtype))
                return false;
        }

        // Parameter check: all parameters of B must match A
        for (Map.Entry<String, String> entry : b.parameters.entrySet()) {
            String key = entry.getKey();
            if (!a.parameters.containsKey(key)) return false;
            if (!a.parameters.get(key).equals(entry.getValue())) return false;
        }

        return true;
    }
}

package com.example.demo.controller;

import com.example.demo.model.MimeType;
import com.example.demo.util.MimeUtils;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.*;

@RestController
public class MimeController {

    @GetMapping("/mime")
    public Map<String, Boolean> testMime() {

        Map<String, Boolean> result = new LinkedHashMap<>();

        MimeType JSON = new MimeType("application", "json", Map.of());
        MimeType MULTIPART = new MimeType("multipart", "form-data", Map.of("boundary", "my-boundary"));
        MimeType ALL = new MimeType("*", "*", Map.of());

        result.put("a", MimeUtils.isHandledBy(JSON, JSON));
        result.put("b", MimeUtils.isHandledBy(new MimeType("*", "json", Map.of()), JSON));
        result.put("c", MimeUtils.isHandledBy(new MimeType("application", "*", Map.of()), JSON));
        result.put("d", MimeUtils.isHandledBy(ALL, MULTIPART));
        result.put("e", MimeUtils.isHandledBy(MULTIPART, ALL));
        result.put("f", MimeUtils.isHandledBy(JSON, MULTIPART));
        result.put("g", MimeUtils.isHandledBy(
                new MimeType("application", "*+xml", Map.of()),
                new MimeType("application", "soap+xml", Map.of())
        ));

        return result;
    }
}

output:

{
  "a": true,
  "b": true,
  "c": true,
  "d": true,
  "e": false,
  "f": false,
  "g": true
}


