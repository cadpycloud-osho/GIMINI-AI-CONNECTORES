groupBy:

EXAMPLE 1:


INPUT:

import java.util.Arrays;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;
import java.util.concurrent.atomic.AtomicInteger;

public class GroupByExample1 {

    public static Map<Integer, List<String>> groupByListIndex(List<String> inputList) {
        // DataWeave: ["a","b","c"] groupBy (item, index) -> index
        AtomicInteger index = new AtomicInteger(0);
        return inputList.stream()
                .collect(Collectors.groupingBy(
                    item -> index.getAndIncrement(),
                    LinkedHashMap::new, 
                    Collectors.toList()
                ));
    }

    public static void main(String[] args) {
        List<String> input = Arrays.asList("a", "b", "c");
        Map<Integer, List<String>> output = groupByListIndex(input);
        System.out.println("Input List: " + input);
        System.out.println("Output (JSON equivalent): " + output);
    }
}

OUTPUT:

{0=[a], 1=[b], 2=[c]}

________________________________________________________
EXAMPLE 2:


INPUT:

import java.util.Arrays;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

record Developer(String name, String language) {}

public class GroupByExample2 {

    public static Map<String, List<Developer>> groupByLanguage(List<Developer> inputList) {
        // DataWeave: myArray groupBy (item) -> item.language
        return inputList.stream()
                .collect(Collectors.groupingBy(Developer::language));
    }

    public static void main(String[] args) {
        List<Developer> input = Arrays.asList(
            new Developer("Foo", "Java"),
            new Developer("Bar", "Scala"),
            new Developer("FooBar", "Java")
        );
        Map<String, List<Developer>> output = groupByLanguage(input);
        System.out.println("Input List: " + input);
        System.out.println("Output (JSON equivalent): " + output);
    }
}

OUTPUT:

{Scala=[Developer[name=Bar, language=Scala]], Java=[Developer[name=Foo, language=Java], Developer[name=FooBar, language=Java]]}

_________________________________________________________
EXAMPLE 3:


INPUT:

import java.util.Arrays;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import java.util.stream.Collectors;

record MenuItem(String id, String label) {}

public class GroupByExample3 {

    public static Map<String, List<String>> groupBySingleLiteralKey(List<MenuItem> items) {
        // DataWeave: (myVar.menu.items.*label groupBy "myLabels")
        
        // 1. Select and filter non-null labels (*label)
        List<String> labels = items.stream()
                .map(MenuItem::label)
                .filter(Objects::nonNull) 
                .collect(Collectors.toList());

        // 2. Group the resulting list under the literal key "myLabels"
        return Map.of("myLabels", labels);
    }

    public static void main(String[] args) {
        List<MenuItem> items = Arrays.asList(
            new MenuItem("internal", null),
            new MenuItem("left", "Move Left"),
            new MenuItem("right", "Move Right"),
            new MenuItem("up", "Move Up"),
            new MenuItem("down", "Move Down")
        );
        
        Map<String, List<String>> output = groupBySingleLiteralKey(items);
        System.out.println("Input List: " + items);
        System.out.println("Output (JSON equivalent): " + output);
    }
}

OUTPUT:

{myLabels=[Move Left, Move Right, Move Up, Move Down]}


_________________________________________________________
EXAMPLE 4:


INPUT:

import java.util.regex.Pattern;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

public class GroupByExample4 {

    public static Map<Boolean, String> groupByVowelStatus(String inputString) {
        // DataWeave: "hello world!" groupBy (not isEmpty($ find /[aeiou]/))
        Pattern vowelPattern = Pattern.compile("[aeiou]");

        Map<Boolean, List<String>> groupedList = inputString.chars()
                .mapToObj(c -> String.valueOf((char) c))
                .collect(Collectors.groupingBy(
                    // Grouping function: true if character is a vowel, false otherwise
                    character -> vowelPattern.matcher(character).matches()
                ));

        // DataWeave joins the characters back into a string value for the output map
        return groupedList.entrySet().stream()
                .collect(Collectors.toMap(
                    Map.Entry::getKey,
                    entry -> entry.getValue().stream().collect(Collectors.joining())
                ));
    }

    public static void main(String[] args) {
        String input = "hello world!";
        Map<Boolean, String> output = groupByVowelStatus(input);
        System.out.println("Input String: " + input);
        System.out.println("Output (JSON equivalent): " + output); 
    }
}

OUTPUT:


{false=hll wrld!, true=eoo}

_________________________________________________________
EXAMPLE 5:


INPUT:

import java.util.List;
import java.util.Map;
import java.util.LinkedHashMap;
import java.util.stream.Collectors;

public class GroupByExample5 {

    public static Map<String, Map<String, String>> groupMapByValue(Map<String, String> inputMap) {
        // DataWeave: { "a" : "b", "c" : "d"} groupBy upper($)
        
        return inputMap.entrySet().stream()
                .collect(Collectors.groupingBy(
                    // Key is the uppercase value (upper($))
                    entry -> entry.getValue().toUpperCase(),
                    // Value is the sub-map containing the original entry
                    Collectors.toMap(
                        Map.Entry::getKey,
                        Map.Entry::getValue,
                        (oldVal, newVal) -> oldVal, 
                        LinkedHashMap::new
                    )
                ));
    }

    public static void main(String[] args) {
        Map<String, String> input = Map.of("a", "b", "c", "d");
        Map<String, Map<String, String>> output = groupMapByValue(input);
        System.out.println("Input Map: " + input);
        System.out.println("Output (JSON equivalent): " + output);
    }
}


OUTPUT:

{D={c=d}, B={a=b}}



_________________________________________________________
EXAMPLE 6:


INPUT:

import java.util.Arrays;
import java.util.List;
import java.util.Map;

public class GroupByExample6 {

    // Simulates the DataWeave operation of reading XML and grouping the resulting list
    public static Map<String, List<String>> groupBySingleKey(List<String> prices) {
        // DataWeave: myRead.prices groupBy "costs"
        // This groups the entire list of prices under the literal key "costs"
        return Map.of("costs", prices);
    }

    public static void main(String[] args) {
        // Simulating the result of XML parsing: a list of price strings
        List<String> priceList = Arrays.asList("9.99", "10.99");
        
        Map<String, List<String>> output = groupBySingleKey(priceList);
        System.out.println("Input Price List: " + priceList);
        // Note: Java standard JSON output lists the prices under 'costs', 
        // as the DW output structure {"price": "9.99", "price": "10.99"} is not valid standard JSON.
        System.out.println("Output (JSON equivalent): " + output);
    }
}

OUTPUT:

{costs=[9.99, 10.99]}























