pluck:


example 1:


input:

package com.example.demo;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.*;

@SpringBootApplication
@RestController
public class PluckObjectController {

    public static void main(String[] args) {
        SpringApplication.run(PluckObjectController.class, args);
    }

    @GetMapping("/pluck-object")
    public List<Map<String, Map<String, String>>> pluckExample() {

        Map<String, String> input = Map.of("a", "b", "c", "d");
        List<Map<String, Map<String, String>>> result = new ArrayList<>();

        int index = 0;
        for (Map.Entry<String, String> entry : input.entrySet()) {
            Map<String, Map<String, String>> item =
                    Map.of(String.valueOf(index),
                            Map.of(entry.getValue(), entry.getKey()));
            result.add(item);
            index++;
        }

        return result;
    }
}


output:


[
  { "0": { "b": "a" } },
  { "1": { "d": "c" } }
]


----------------------------------------------------------------


example 2:


input:

package com.example.demo;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
import org.w3c.dom.*;
import javax.xml.parsers.*;
import java.util.*;

@RestController
public class PluckXmlController {

    @GetMapping("/pluck-xml")
    public Map<String, Object> pluckXMLExample() throws Exception {

        String xml = "<prices><basic>9.99</basic><premium>53.00</premium><vip>398.99</vip></prices>";
        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc = builder.parse(new java.io.ByteArrayInputStream(xml.getBytes()));

        NodeList nodes = doc.getElementsByTagName("*");

        List<String> keys = new ArrayList<>();
        List<Double> values = new ArrayList<>();
        List<Integer> indices = new ArrayList<>();

        int index = 0;
        for (int i = 1; i < nodes.getLength(); i++) { // skip root element
            Element element = (Element) nodes.item(i);
            keys.add(element.getTagName());
            values.add(Double.parseDouble(element.getTextContent()));
            indices.add(index);
            index++;
        }

        return Map.of(
            "result", Map.of(
                "keys", keys,
                "values", values,
                "indices", indices
            )
        );
    }
}



output:

{
  "result": {
    "keys": ["basic", "premium", "vip"],
    "values": [9.99, 53.00, 398.99],
    "indices": [0, 1, 2]
  }
}
