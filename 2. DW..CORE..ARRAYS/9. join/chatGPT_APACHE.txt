join:


input:

from("direct:start")
    .process(exchange -> {

        java.util.List<java.util.Map<String, String>> users = java.util.List.of(
            java.util.Map.of("id", "1", "name", "Mariano"),
            java.util.Map.of("id", "2", "name", "Leandro"),
            java.util.Map.of("id", "3", "name", "Julian"),
            java.util.Map.of("id", "5", "name", "Julian")
        );

        java.util.List<java.util.Map<String, String>> products = java.util.List.of(
            java.util.Map.of("ownerId", "1", "name", "DataWeave"),
            java.util.Map.of("ownerId", "1", "name", "BAT"),
            java.util.Map.of("ownerId", "3", "name", "DataSense"),
            java.util.Map.of("ownerId", "4", "name", "SmartConnectors")
        );

        java.util.List<java.util.Map<String, Object>> result = new java.util.ArrayList<>();

        for (var user : users) {
            for (var product : products) {
                if (user.get("id").equals(product.get("ownerId"))) {
                    result.add(
                        java.util.Map.of(
                            "l", user,
                            "r", product
                        )
                    );
                }
            }
        }

        exchange.getIn().setBody(result);
    });


output:

[
  {
    "l": {
      "id": "1",
      "name": "Mariano"
    },
    "r": {
      "ownerId": "1",
      "name": "DataWeave"
    }
  },
  {
    "l": {
      "id": "1",
      "name": "Mariano"
    },
    "r": {
      "ownerId": "1",
      "name": "BAT"
    }
  },
  {
    "l": {
      "id": "3",
      "name": "Julian"
    },
    "r": {
      "ownerId": "3",
      "name": "DataSense"
    }
  }
]


