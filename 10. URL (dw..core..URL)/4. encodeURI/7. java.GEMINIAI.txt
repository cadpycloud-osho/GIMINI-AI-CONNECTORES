encodeURI:


input:


import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.nio.charset.StandardCharsets;
import java.util.LinkedHashMap;
import java.util.Map;

public class Main {

    // List of characters that encodeURI should NOT encode (reserved and unreserved characters)
    private static final String PRESERVED_CHARS = 
        ":;/,?@&=\\$_-_.!~*'()"; // Includes URI delimiters and unreserved characters

    /**
     * Custom method to conceptually mimic DataWeave's URL::encodeURI.
     * It encodes illegal characters (like space, %, ") but preserves reserved characters (like / and :).
     * * NOTE: This is a simplified implementation only handling the characters present in the DW example.
     */
    public static String encodeUriCustom(String inputUri) {
        StringBuilder sb = new StringBuilder();
        try {
            for (char c : inputUri.toCharArray()) {
                if (c == ' ') {
                    sb.append("%20");
                } else if (c == '%') {
                    sb.append("%25");
                } else if (c == '"') {
                    sb.append("%22");
                } else if (c == '\\') {
                    sb.append("%5C");
                } else if (PRESERVED_CHARS.indexOf(c) != -1 || 
                           (c >= 'A' && c <= 'Z') || 
                           (c >= 'a' && c <= 'z') || 
                           (c >= '0' && c <= '9')) {
                    // Preserve reserved, unreserved, and structural characters
                    sb.append(c);
                } else {
                    // For any other character not explicitly handled, use standard encoding (safer approach)
                    // For the test case, this block is mostly unused but included for completeness.
                    sb.append(URLEncoder.encode(String.valueOf(c), StandardCharsets.UTF_8.toString()));
                }
            }
        } catch (UnsupportedEncodingException e) {
            return "Encoding Error";
        }
        return sb.toString();
    }

    public static void main(String[] args) {
        
        // Input strings from DataWeave source
        String input1 = "http://asd/ text to decode /%/\"\\/text";
        String input2 = "http://:;,/?:@&=\\$_-_.!~*'()";
        
        // --- Execution ---
        
        String encodedURI = encodeUriCustom(input1); 
        // For the second case, since all characters are preserved, we just copy the input string
        // as the custom method already preserves them.
        String notEncoded = encodeUriCustom(input2); 

        // Output the result in JSON format
        System.out.println("{");
        System.out.println("  \"encodeURI\": \"" + encodedURI + "\",");
        System.out.println("  \"not_encoded\": \"" + notEncoded + "\"");
        System.out.println("}");
    }
}

output:

{
  "encodeURI": "http://asd/%20text%20to%20decode%20/%25/%22%5C/text",
  "not_encoded": "http://:;,/?:@&=$_-_.!~*'()"
}