months:


input:
import org.apache.camel.builder.RouteBuilder;
import java.time.ZonedDateTime;
import java.time.Period;
import java.util.LinkedHashMap;
import java.util.Map;

public class MonthsArithmeticRoute extends RouteBuilder {

    @Override
    public void configure() throws Exception {

        from("direct:calculateMonths")
            .routeId("Months-Arithmetic-Route")
            .process(exchange -> {
                Map<String, Object> results = new LinkedHashMap<>();

                // 1. Next Month Logic
                // We parse as ZonedDateTime to handle the 'Z' (UTC) and time components
                ZonedDateTime baseDate = ZonedDateTime.parse("2020-10-05T20:22:34.385Z");
                ZonedDateTime resultDate = baseDate.plusMonths(1);
                
                // DataWeave's output format for DateTime is ISO-8601
                results.put("nextMonth", resultDate.toInstant().toString());

                // 2. Period Representation: months(4)
                // Period.toString() natively returns the "P4M" format
                results.put("fourMonthPeriod", Period.ofMonths(4).toString());

                // 3. Negative Arithmetic: months(-1) + months(2)
                // Adding periods results in an integer total of months in this DW context
                Period p1 = Period.ofMonths(-1);
                Period p2 = Period.ofMonths(2);
                results.put("addNegativeValue", p1.plus(p2).getMonths());

                exchange.getIn().setBody(results);
            })
            .marshal().json()
            .log("Months Result: ${body}");
    }
}



output:

{
  "nextMonth": "2020-11-05T20:22:34.385Z",
  "fourMonthPeriod": "P4M",
  "addNegativeValue": 1
}


