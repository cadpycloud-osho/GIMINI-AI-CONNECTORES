days:

input:

package com.example.demo.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import java.time.*;
import java.time.format.DateTimeFormatter;
import java.util.HashMap;
import java.util.Map;

@RestController
public class DateController {

    @GetMapping("/dates")
    public Map<String, String> getDates() {

        Map<String, String> result = new HashMap<>();

        DateTimeFormatter formatter = DateTimeFormatter.ISO_INSTANT;

        Instant baseInstant = Instant.parse("2020-10-05T20:22:34.385Z");
        Instant midnightBase = Instant.parse("2020-10-05T00:00:00.000Z");

        // DataWeave operations replicated in Java

        Instant tomorrow = baseInstant.plus(Duration.ofDays(1));
        Instant yesterday = baseInstant.minus(Duration.ofDays(1));

        // Decimal day calculations
        Instant decimalDaysPlusQuarter = midnightBase.plus(Duration.ofHours((long) (0.25 * 24))); // 6 hours
        Instant decimalDaysPlusHalf = midnightBase.plus(Duration.ofHours((long) (0.5 * 24)));     // 12 hours
        Instant decimalDaysPlusThreeQuarters = midnightBase.plus(Duration.ofHours((long) (0.75 * 24))); // 18 hours

        // Period calculations
        Duration decimalInputAsPeriod = Duration.ofSeconds((long) (4.555 * 24 * 60 * 60)); // converting days to seconds
        Period fourDayPeriod = Period.ofDays(4);
        Period negativeValue = Period.ofDays(-1);

        result.put("tomorrow", formatter.format(tomorrow));
        result.put("yesterday", formatter.format(yesterday));
        result.put("decimalDaysPlusQuarter", formatter.format(decimalDaysPlusQuarter));
        result.put("decimalDaysPlusHalf", formatter.format(decimalDaysPlusHalf));
        result.put("decimalDaysPlusThreeQuarters", formatter.format(decimalDaysPlusThreeQuarters));
        result.put("decimalInputAsPeriod", decimalInputAsPeriod.toString());
        result.put("fourDayPeriod", fourDayPeriod.toString());
        result.put("negativeValue", negativeValue.toString());

        return result;
    }
}




output:
{
  "tomorrow": "2020-10-06T20:22:34.385Z",
  "yesterday": "2020-10-04T20:22:34.385Z",
  "decimalDaysPlusQuarter": "2020-10-05T06:00:00Z",
  "decimalDaysPlusHalf": "2020-10-05T12:00:00Z",
  "decimalDaysPlusThreeQuarters": "2020-10-05T18:00:00Z",
  "decimalInputAsPeriod": "PT109H19M12S",
  "fourDayPeriod": "P4D",
  "negativeValue": "P-1D"
}


